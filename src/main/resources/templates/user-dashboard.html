<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>User Dashboard</title>

<style>
body {
    margin:0;
    font-family:Arial, sans-serif;
    background:#f4f6f9;
}

/* HEADER */
.header {
    background:#343a40;
    color:white;
    padding:15px 20px;
    font-size:20px;
}

/* LAYOUT */
.wrapper {
    display:flex;
    min-height:calc(100vh - 100px);
}

/* SIDEBAR */
.sidebar {
    width:230px;
    background:#212529;
    padding-top:20px;
}

.sidebar h3 {
    color:white;
    text-align:center;
    margin-bottom:20px;
}

.sidebar a {
    display:block;
    padding:12px 20px;
    color:#adb5bd;
    text-decoration:none;
}

.sidebar a:hover {
    background:#495057;
    color:white;
}

/* CONTENT */
.content {
    flex:1;
    padding:30px;
}

/* PRODUCT CARD */
.card-grid {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
    gap:20px;
}

.card {
    background:white;
    border-radius:5px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
    padding:15px;
    text-align:center;
}

.card img {
    width:100%;
    height:150px;
    object-fit:cover;
}

.card h4 {
    margin:10px 0;
}

.card a {
    display:inline-block;
    margin-top:10px;
    padding:8px 14px;
    background:#007bff;
    color:white;
    text-decoration:none;
    border-radius:4px;
}

/* FOOTER */
.footer {
    background:#343a40;
    color:white;
    text-align:center;
    padding:10px;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
    Fake Product Identification System – User Panel
</div>

<div class="wrapper">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h3>USER MENU</h3>
        <a href="/user/dashboard">Dashboard</a>
        <a href="/user/scan-qr">Scan QR Code</a>
        <a href="/user/verify-product">Verify Product</a>
        <a href="/user/products">View Products</a>
        <a href="/user/history">Verification History</a>
        <a href="/logout">Logout</a>
    </div>

    <!-- CONTENT -->
    <div class="content">

        <h2>Welcome, <span th:text="${user.username}"></span></h2>
        <p>Select a product to view details</p>

        <!-- PRODUCT LIST -->
        <div class="card-grid">

            <div class="card" th:each="p : ${products}">
                <img th:if="${p.images != null}"
                     th:src="'data:image/jpeg;base64,' + ${p.images[0].base64Image}" />

                <h4 th:text="${p.productName}"></h4>

                <a th:href="@{/user/products/view/{id}(id=${p.id})}">
                    View Product
                </a>
            </div>

        </div>

    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    © 2026 Fake Product Identification System | User Module
</div>

</body>
</html>
